@page "/CustomersList"
@layout MainLayout

@using PayNowWeb.Infrastructure
@using PayNowWeb.Infrastructure.Entities

<RadzenDataGrid AllowFiltering="true" AllowColumnResize="true" AllowAlternatingRows="false" FilterMode="FilterMode.Advanced"
		AllowSorting="true" PageSize="10" AllowPaging="true" ShowPagingSummary="true"
		Data="@Customers" ColumnWidth="100px" LogicalFilterOperator="LogicalFilterOperator.Or" SelectionMode="DataGridSelectionMode.Single" @bindbind-Value="@SelectedCustomers">
	<Columns>
		<RadzenDataGridColumn Property="@nameof(Customer.Id)" Title="ID" Filterable="true" Frozen="true" TextAlign="TextAlign.Center"/>
		<RadzenDataGridColumn Property="@nameof(Customer.PhotoUrl)" Title="Photo" Filterable="false" Frozen="true" TextAlign="TextAlign.Center">
			<Template Context="customer">
				<RadzenImage Path="@customer.PhotoUrl" AlternateText="@($"{customer.FirstName} {customer.LastName}")" class="rz-gravatar"/>
			</Template>
		</RadzenDataGridColumn>
		<RadzenDataGridColumn Property="@nameof(Customer.FirstName)" Title="First name" Filterable="true" Frozen="true" TextAlign="TextAlign.Center"/>
		<RadzenDataGridColumn Property="@nameof(Customer.LastName)" Title="Last name" Filterable="true"  Frozen="true" TextAlign="TextAlign.Center"/>
	</Columns>
</RadzenDataGrid>

@code {

	[Inject]
	public DatabaseContext DbContext { get; set; } = null!;

	public DbSet<Customer> Customers => DbContext.Customers;
	public List<Customer> SelectedCustomers { get; set; } = [];
}